<html>
<head>
<title>Set Super Diamond OS Email</title>
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
</head>
<body>
<script src="https://super-diamond-mail--alexidians.repl.co/API/API.js"></script>
<h1>Set Super Diamond OS Email</h1>
<p><input id="newEmailInput" type="email"></input> <button onclick="setEmail()">Set Email</button> <button onclick="setEmailAsSuperDiamondMail()">Set Email As Super Diamond Mail</button></p>
<script>
    Password = localStorage.getItem("Password")
    if(Password == "null") {
     alert("Welcome")
     alert("if you are a child/kid ask your parents to help setup Super Diamond OS in this browser")
     alert("Setup Note: Every Browser on Every Device has the has different Data saved/n if you are a parent setting this up for kids a account needs to be created for all of your kids/n important: if you are using a browser with restricted website access for kids it can be bypassed with our browser that uses iframes or other apps that have iframes to not allowed websites")
     alert("Before you go. Lets Setup your Device")
     Setup()
    } else {
     if(Password == null) {
      alert("Welcome")
      alert("if you are a child/kid ask your parents to help setup Super Diamond OS in this browser")
      alert("Setup Note: Every Browser on Every Device has the has different Data saved/n if you are a parent setting this up for kids a account needs to be created for all of your kids/n important: if you are using a browser with restricted website access for kids it can be bypassed with our browser that uses iframes or other apps that have iframes to not allowed websites")
      alert("Before you go. Lets Setup your Device")
      Setup()
     } else {
      if(Password == "Recover") {
       alert("Welcome")
       alert("if you are a child/kid ask your parents to help setup Super Diamond OS in this browser")
       alert("Setup Note: Every Browser on Every Device has the has different Data saved/n if you are a parent setting this up for kids a account needs to be created for all of your kids/n important: if you are using a browser with restricted website access for kids it can be bypassed with our browser that uses iframes or other apps that have iframes to not allowed websites")
       alert("Before you go. Lets Setup your Device")
       Setup()
      } else {
       if(getCookie("loggedIn") == "itis") {
        alert("Welcome Back")
       }
       else {
       var LoginEnteredPass = prompt("Enter Password To Continue")
       if(LoginEnteredPass == Password) {
        alert("Welcome Back")
        setCookie("loggedIn", "itis", 1)
       } else {
        if(LoginEnteredPass == "Recover") {
         alert("The Recovery Feature might not be added but it currently is not here/n If you need to recover/reset your password Contact us at super_diamond_community@inbox.lv")
         open("mailto:super_diamond_community@inbox.lv")
         location.replace(location.href)
        } else {
         alert("Incorrect Password")
         location.replace(location.href)
        }
       }
       }
      }
     }
    }
  
  emailjs.init("9EOT4CjiLi7_ipO_l");

  // Function to send verification code
  function setEmail() {
    // Generate a random verification code (you can use a library for this)
    const verificationCode = Math.floor(100000 + Math.random() * 900000).toString();

    // Use the send method to send an email
    emailjs.send("service_sx47f8v", "template_o4nfxph", {
      to_email: document.getElementById("newEmailInput").value,
      code: verificationCode,
    })
    .then(function(response) {
      if(prompt("Enter Verification Code. There is a 99% chance it ended up in your spam folder as the frontend email sending service can't authenticate the address") == verificationCode) {
       localStorage.setItem("Email", document.getElementById("newEmailInput").value)
       localStorage.setItem("EmailType", "Normal")
       alert("Correct!")
      }
      else {
       alert("Incorrect!")
      }
    }, function(error) {
      alert("Failed To Send Verification Email: " + error)
    });
  }
    
  function setEmailAsSuperDiamondMail() {
    // Generate a random verification code (you can use a library for this)
    const verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
    var Request = new SuperDiamondMailApiRequest()
    Request.API = new SuperDiamondMailApi("sendMail")
    Request.params = "Name=Super%20Diamond%20OS&from=SuperDiamondOS@alexidians.github.io&message=" + encodeURI("We Received A Request That You Are Trying To Set Your Email As Super Diamond Mail. Here is you verification Code: " + verificationCode) + "&recipient=" + document.getElementById("newEmailInput").value + "&subject=" + encodeURI("Super Diamond OS Email Verification") + "&AccountToken=636e6c5c4915e30fad31cd8003ca4b7a"
    Request.send()
    if(prompt("Enter Verification Code. Remember Its In Super Diamond Mail") == verificationCode) {
     localStorage.setItem("Email", document.getElementById("newEmailInput").value)
     localStorage.setItem("EmailType", "SuperDiamondMail")
     alert("Correct!")
    }
    else {
     alert("Incorrect!")
    }
  }
</script>
</body>
</html>
